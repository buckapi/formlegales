<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Aplicación servicio de garante</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/animate.min.css">
	<link rel="stylesheet" href="assets/css/fontawesome-all.css">
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/colors/switch.css">
	<!-- Color Alternatives -->
	<link href="assets/css/colors/color-2.css" rel="alternate stylesheet" type="text/css" title="color-2">
	<link href="assets/css/colors/color-3.css" rel="alternate stylesheet" type="text/css" title="color-3">
	<link href="assets/css/colors/color-4.css" rel="alternate stylesheet" type="text/css" title="color-4">
	<link href="assets/css/colors/color-5.css" rel="alternate stylesheet" type="text/css" title="color-5">
</head>

<body>

	<!-- This code is use for color chooser, you can delete -->

	<div class="clearfix"></div>

	<div class="wrapper clearfix">
		<div class="wizard-part-title">
			<h3> Aplicación servicio <br> de garante | Legales</h3>

		</div>
		<!--multisteps-form-->
		<div class="multisteps-form">
			<!--progress bar-->
			<div class="row">
				<div class="col-12 col-lg-12 ml-auto mr-auto mb-5 mt-5">
					<div class="multisteps-form__progress">
						<button class="multisteps-form__progress-btn js-active">Terminos</button>
						<button class="multisteps-form__progress-btn">1</button>
						<button class="multisteps-form__progress-btn">2</button>
						<button class="multisteps-form__progress-btn">3 </button>
						<button class="multisteps-form__progress-btn">4 </button>
						<button class="multisteps-form__progress-btn">5 </button>
					</div>
				</div>
			</div>
			<!--form panels-->
			<div class="row">
				<div class="col-12 col-lg-12 m-auto">
					<!-- <form class="multisteps-form__form clearfix" action="index.html#" method="post" id="wizard"> -->
					<form class="multisteps-form__form clearfix" action="#" method="post" id="wizard">
	
						<!--single form panel-->
						<div class="multisteps-form__panel js-active" data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>1 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar">
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-justify">
									<h2 style="text-align: center;">Aplicación de Servicio AUTORIZACIÓN</h2>
									<p>TRATAMIENTO DE DATOS PERSONALES Y CENTRALES DE INFORMACIÓN Declaro que para efectos de acceder a la prestación de servicios por parte de REALTY & LEGAL
									INDUSTRY S.A.S, el suscrito ha suministrado datos personales y este como
									responsable en cumplimiento de las disposiciones de la Ley 1581 de 2012 y demás
									normas vigentes, le informa que los datos personales que se recojan y conserven
									en nuestras bases de datos con motivo aplicación servicio d, serán utilizados
									para los fines dispuestos en este contrato como son: el cumplimiento de las
									obligaciones contractuales, legales y evaluación de los servicios prestados,
									informar sobre interrupciones y/o suspensiones de los mismos servicios
									contratados, entre otras finalidades necesariamente conexas con la prestación
									del servicio de publicidad. REALTY & LEGAL INDUSTRY S.A.S, como entidad
									socialmente responsable, informa que sus datos serán tratados de manera segura
									y confidencial, y que le asisten los derechos de conocerlos, actualizarlos y
									rectificarlos, acorde con la norma de protección de datos personales y la
									política adoptada por ella, y que esta información será conservada hasta cuando
									exista relación contractual o legal entre el Cliente/Usuario y la entidad.</p>
									<p>Tienes dudas? Hablemos : hello@legales.com.co</p>
								</div>
								
								<div class="wizard-footer">
									
									<div class="actions">
										<ul>
											<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="multisteps-form__panel " data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>2 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar">
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-center">
									<h2>Aplicación servicio  de garante | Legales</h2>
									<p>Seleccione las respuestas correspondientes</p>
								</div>
								<div class="wizard-content-form">
									<div class="wizard-form-field">
										
										
										<div class="wizard-form-input position-relative form-group has-float-label">
											<input type="text" name="name" class="form-control" placeholder="Nombre completo">
											
											<label>Nombre completo</label>
										</div>
									<div class="actions">
										<ul>
											<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
											<li><button type="submit" id="submit-form" title="NEXT">Enviar <i class="fa fa-arrow-right"></i></button></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

	</div>
	<script src="assets/js/jquery-3.3.1.min.js"></script>
	<script src="assets/js/popper.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/switch.js"></script>
	<script src="assets/js/main.js"></script>
	<script>
		$("#files").change(function() {
			filename = this.files[0].name
			console.log(filename);
		});
	</script>
	<script> addReferenceField();
		
		function addReferenceField() {
			var container = document.getElementById('referenceFields');
			var referenceHTML = `

		<div class="wizard-form-field">
			<div class="form-row">
		        <div class="wizard-form-input position-relative form-group has-float-label">
		            <input type="text" name="referenceName[]" class="form-control" placeholder="Nombre completo" required>
		            <label>Nombre completo</label>
		        </div>
		        <div class="wizard-form-input position-relative form-group has-float-label">
		            <input type="text" name="referencePhone[]" class="form-control" placeholder="Teléfono" required>
		            <label>Teléfono</label>
		        </div>
		    </div>
		  <div class="form-row">
	        <div class="wizard-form-input position-relative form-group has-float-label">
	            <input type="email" name="referenceEmail[]" class="form-control" placeholder="Correo electrónico" required>
	            <label>Correo electrónico</label>
	        </div>
	        <div class="wizard-form-input position-relative form-group has-float-label">
	            <input type="text" name="referenceAddress[]" class="form-control" placeholder="Dirección" required>
	            <label>Dirección</label>
	        </div>
	    </div>
		<div class="row">
			<div class="col-md-3">
		  			<button type="button" onclick="removeReferenceField(this)"> Eliminar <i class="fa fa-minus"></i></button>
		  	</div>
		  	<div class="col-md-3">
		  			<button type="button" id="addReferenceButton" style="top:"><span class="button" >Referencia <i class="fa fa-plus"></i></span></button>
		  	</div>
		</div>
		  
		</div>
	  `;
			container.insertAdjacentHTML('beforeend', referenceHTML);
		}

		function removeReferenceField(element) {
			element.parentNode.remove();
		}

		document.getElementById('addReferenceButton').addEventListener('click', addReferenceField);
		
	</script>
	<script>
	document.addEventListener('DOMContentLoaded', function () {
  	const form = document.getElementById('wizard');
  
  	

  	form.addEventListener('submit', function (e) {
    e.preventDefault(); // Evita que el formulario se envíe de la manera tradicional
    
    // Recopila los datos del formulario, excepto las referencias
    const formData = new FormData(form);
    const jsonObject = {};

    for (const [key, value]  of formData.entries()) {
      if (!key.startsWith("reference")) {
        jsonObject[key] = value;
      }
    }

    // Construir el array de referencias personales
    const references = [];
    const referenceNames = formData.getAll('referenceName[]');
    const referencePhones = formData.getAll('referencePhone[]');
    const referenceEmails = formData.getAll('referenceEmail[]');
    const referenceAddresses = formData.getAll('referenceAddress[]');

    for (let i = 0; i < referenceNames.length; i++) {
      references.push({
        name: referenceNames[i],
        phone: referencePhones[i],
        email: referenceEmails[i],
        address: referenceAddresses[i]
      });
    }

    // Agrega las referencias al objeto JSON principal
    jsonObject['references'] = references;

    // Convierte los datos del formulario en una cadena JSON
    const jsonPayload = JSON.stringify(jsonObject);

    // Realiza la solicitud POST a PocketBase
    fetch('https://db.buckapi.com:8085/api/collections/requests/records', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
        // Si necesitas autenticación, aquí deberías agregar tu token de acceso
        // 'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
      },
      body: jsonPayload
    })
    .then(response => response.json())
    .then(data => {
      console.log('Success:', data);
      // Aquí puedes manejar una redirección o mostrar un mensaje de éxito
       window.location.href = 'pagina-de-confirmacion.html';

    })
    .catch((error) => {
      console.error('Error:', error);
      // Aquí puedes manejar errores
    	});
	  });
	});

	</script>
	
</body>

</html>