<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Aplicación servicio de garante</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/animate.min.css">
	<link rel="stylesheet" href="assets/css/fontawesome-all.css">
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/colors/switch.css">
	<!-- Color Alternatives -->
	<link href="assets/css/colors/color-2.css" rel="alternate stylesheet" type="text/css" title="color-2">
	<link href="assets/css/colors/color-3.css" rel="alternate stylesheet" type="text/css" title="color-3">
	<link href="assets/css/colors/color-4.css" rel="alternate stylesheet" type="text/css" title="color-4">
	<link href="assets/css/colors/color-5.css" rel="alternate stylesheet" type="text/css" title="color-5">
		<link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">

</head>

<body>

	<!-- This code is use for color chooser, you can delete -->

	<div class="clearfix"></div>

	<div class="wrapper clearfix">
		<div class="wizard-part-title">
			<h3> Aplicación servicio <br> de garante | Legales</h3>

		</div>
		<!--multisteps-form-->
		<div class="multisteps-form">
			<!--progress bar-->
			<div class="row">
				<div class="col-12 col-lg-12 ml-auto mr-auto mb-5 mt-5">
					<div class="multisteps-form__progress">
						<button class="multisteps-form__progress-btn js-active">Terminos</button>
						<button class="multisteps-form__progress-btn">1</button>
						<button class="multisteps-form__progress-btn">2</button>
						<button class="multisteps-form__progress-btn">3 </button>
						<button class="multisteps-form__progress-btn">4 </button>
						<button class="multisteps-form__progress-btn">5 </button>
					</div>
				</div>
			</div>
			<!--form panels-->
			<div class="row">
				<div class="col-12 col-lg-12 m-auto">
					<!-- <form class="multisteps-form__form clearfix" action="index.html#" method="post" id="wizard"> -->
					<form class="multisteps-form__form clearfix" action="#" method="post" id="wizard">
	
						<!--single form panel-->
						<div class="multisteps-form__panel js-active" data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>1 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar">
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-justify">
									<h2 style="text-align: center;">Aplicación de Servicio AUTORIZACIÓN</h2>
									<p>TRATAMIENTO DE DATOS PERSONALES Y CENTRALES DE INFORMACIÓN Declaro que para efectos de acceder a la prestación de servicios por parte de REALTY & LEGAL
									INDUSTRY S.A.S, el suscrito ha suministrado datos personales y este como
									responsable en cumplimiento de las disposiciones de la Ley 1581 de 2012 y demás
									normas vigentes, le informa que los datos personales que se recojan y conserven
									en nuestras bases de datos con motivo aplicación servicio d, serán utilizados
									para los fines dispuestos en este contrato como son: el cumplimiento de las
									obligaciones contractuales, legales y evaluación de los servicios prestados,
									informar sobre interrupciones y/o suspensiones de los mismos servicios
									contratados, entre otras finalidades necesariamente conexas con la prestación
									del servicio de publicidad. REALTY & LEGAL INDUSTRY S.A.S, como entidad
									socialmente responsable, informa que sus datos serán tratados de manera segura
									y confidencial, y que le asisten los derechos de conocerlos, actualizarlos y
									rectificarlos, acorde con la norma de protección de datos personales y la
									política adoptada por ella, y que esta información será conservada hasta cuando
									exista relación contractual o legal entre el Cliente/Usuario y la entidad.</p>
									<p>Tienes dudas? Hablemos : hello@legales.com.co</p>
								</div>
								
								<div class="wizard-footer">
									
									<div class="actions">
										<ul>
											<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="multisteps-form__panel " data-animation="slideVert">
							<div class="inner pb-100">
									<div class="wizard-topper">
										<div class="wizard-progress">
											<span>2 of 6 Completedo</span>
											<div class="progress">
												<div class="progress-bar">
												</div>
											</div>
										</div>
									</div>
									<div class="wizard-content-item text-center">
										<h2>Aplicación servicio  de garante | Legales</h2>
										<p>Seleccione las respuestas correspondientes</p>
									</div>
									<div class="wizard-content-form">
										<div class="wizard-form-field">
											<div class="row">
												<div class="col-md-6">
													<div class="n-summary">
													    <span>¿Qué tipo de cliente eres?</span>
													    <label>
													        <input type="radio" id="clientType" value="nuevo" name="clientType" required 
													               data-parsley-required 
													               data-parsley-required-message="Por favor, selecciona un tipo de cliente">
													        <span class="checkmark">Nuevo</span>
													    </label>
													    <label>
													        <input type="radio" id="clientType" value="existente" name="clientType" required 
													               data-parsley-required 
													               data-parsley-required-message="Por favor, selecciona un tipo de cliente">
													        <span class="checkmark">Existente</span>
													    </label>
													</div>

												</div>
												<div class="col-md-6">
													<div class="wizard-form-input position-relative form-group has-float-label mt-0 n-select-option">
														<select id="serviceType" name="serviceType" class="form-control" required data-parsley-required data-parsley-required-message="Por favor, seleccione un tipo de servicio">
															<option value="">Seleccione el tipo de servicio</option>
															<option value="Aplicacion servicio de garente inmobiliario">
																Aplicacion servicio de garante inmobiliario</option>
															<option value="Asesoría en civil">Asesoría en civil</option>
															<option value="Asesoría en penal">Asesoría en penal</option>
															<option value="Asesoría en inmobiliario">Asesoría en
																inmobiliario</option>
															<option value="Asesoría en alcoholemia">Asesoría en alcoholemia
															</option>
														</select>
													</div>
												</div>
											</div>
											
											<div class="wizard-form-input position-relative form-group has-float-label">
												<!-- <input type="text" name="name" class="form-control" placeholder="Nombre completo"> -->
												<input type="text" name="name" class="form-control" id="nombreCompleto" required data-parsley-required data-parsley-minlength="3" placeholder="Nombre completo">

												<label>Nombre completo</label>
											</div>
											<div class="wizard-form-input position-relative form-group has-float-label">
												<input type="email" id="email" class="form-control" name="email" placeholder="Correo electrónico" required 
							           data-parsley-required-message="Por favor, ingresa tu correo electrónico" 
							           data-parsley-type="email" >
												
												<label>Correo electrónico</label>
											</div>
											<div class="wizard-form-input position-relative form-group has-float-label">
											    <input type="text" id="phone" class="form-control" name="phone" placeholder="Escriba su teléfono con el codigo de su país, ejemplo: +573001111111" 
											           required 
											           data-parsley-required-message="Por favor, ingresa tu teléfono"
											           data-parsley-pattern="^\+\d{1,3}\s?\d{4,14}$"
											           data-parsley-pattern-message="Por favor, ingresa un número de teléfono válido con código de país, ejemplo: +573001111111">
											    <label>Teléfono</label>
											</div>
											<div class="row">
													<div class="col-md-12">
														<div class="wizard-form-input position-relative form-group has-float-label mt-0 n-select-option">
															<select id="identityType" name="identityType" class="form-control" required data-parsley-required data-parsley-required-message="Por favor, seleccione un tipo de documento">
																<option value="">Seleccione el tipo de documento</option>
																<option value="Cedula de ciudadania">Cédula de ciudadanía
																</option>
																<option value="Cédula extranjera">Cédula de extranjeria</option>
																<option value="Pasaporte">Pasaporte</option>
															</select>
														</div>
													</div>
													<div class="col-md-6">
														    <div class="wizard-form-input position-relative form-group has-float-label">
															        <input type="text" id="documentNumber" class="form-control" name="documentNumber" placeholder="Número de documento" 
															               required
															               data-parsley-required-message="Por favor, ingresa el número de documento"
															               data-parsley-type="digits"
															               data-parsley-type-message="Por favor, ingresa solo dígitos en el número de documento">
															        <label>Número de documento</label>
															    </div>
													</div>

													<div class="col-md-6">
														<div class="wizard-form-input position-relative form-group has-float-label">
															<input type="text" id="expeditionPlace" class="form-control" name="expeditionPlace" required data-parsley-required data-parsley-minlength="3" placeholder="Lugar de expedición">
															<label>Lugar de expedición</label>
														</div>
													</div>
													<div class="col-md-12">
														<div class="wizard-form-input position-relative form-group has-float-label">
															<input type="text" id="rrss" class="form-control" name="rrss" required data-parsley-required data-parsley-minlength="3" placeholder="Link de redes sociales - facebook o instagram">
															<label>Link de redes sociales</label>
														</div>
													</div>
											</div>
											<div class="wizard-footer">
												<div class="wizard-imgbg">
													<img src="assets/img/v3.png" alt="">
												</div>
												<div class="actions">
													<ul>
														<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
														<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
													</ul>
												</div>
											</div>
										</div>
									</div>
							</div>
						</div>
						<div class="multisteps-form__panel" data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>3 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar" style="width: 65%;"></div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-center">
									<h2>Documentos</h2>
									<p>Carque documento de identidad solo para servicio de garante, para los demas servicios cargue  croquis, tirillas, comparendos, fotos, videos según corresponda, que nos apoyen a conocer su caso perfectamente o enviarlos al correo hello@legales.com.co ASUNTO NOMBRE COMPLETO, CEDULA Y PROCESO.</p>
								</div>
								<div class="wizard-identity wizard-content-form">
									<div class="row">
										<div class="col-md-6">
											<!-- <div class="wizard-identity-box identity-upload text-center">
												<div class="upload-icon">
													<i class="fas fa-cloud-upload-alt"></i>
												</div>
												<div class="upload-option text-center">
													<label for="file-images">Carga de archivos</label>
													<input id="file-images" style="visibility:hidden; display: none;" type="file">
													<span>.jpg or .pdf should
													be more than 500KB or 300PI</span>
												</div>
											</div> -->
											<input type="file" class="filepond" name="filepond">
										</div>
										<div class="col-md-6">
											<div class="wizard-identity-box text-center">
												<div class="wizard-identity-icon">
													<img src="assets/img/vi1.png" alt="">
												</div>
											</div>
										</div>
									</div>
								</div>
								
								<div class="wizard-footer">
									<div class="wizard-imgbg">
										<img src="assets/img/v3.png" alt="">
									</div>
									<div class="actions">
										<ul>
											<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
											<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="multisteps-form__panel" data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>4 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar" style="width: 65%;"></div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-center">
									<h2>Información laboral</h2>
									
								</div>
								<div class="wizard-identity wizard-content-form">
									<div class="row">
										<div class="col-md-12 wizard-identity wizard-content-form">
												<h4 style="padding-bottom: 20px;">Información para servicio de garante informacion de su trabajo/ para procesos legales hechos relevantes del proceso. Cuentenos un breve relato sobre los hechos relevates de su caso, ciudad y fecha de los hechos, solicito audiencia?</h4>
												<input type="text" class="form-control" name="labor" id="labor" placeholder="Escriba aquí su actividad laboral" 
									       required 
									       data-parsley-required-message="Por favor, describe tu actividad laboral"
									       data-parsley-minlength="20"
									       data-parsley-minlength-message="La descripción debe tener al menos 20 caracteres"
									       style="height: 100px;">

										</div>
									</div>
								</div>
								<div class="wizard-identity wizard-content-form" style="padding-top: 25px">
									<div class="row">
										<div class="col-md-12 wizard-identity wizard-content-form">
											<h2 style="text-align: center;">DECLARACIÓN DE ORIGEN DE FONDOS</h2>
										</div>
										<div class="wizard-identity wizard-content-form">
											<h3>Las partes aquí  declaran bajo la gravedad del juramento que sus ingresos provienen de actividades licitas, que no se encuentran con registro negativo en listados de prevención de lavado de activos nacionales o internacionales, que no se encuentran dentro de una de las dos categorías de lavado de activos (conversión o movimiento) y que, en consecuencia, se obligan a responder a la otra parte por todos los perjuicios que se llegaren a causar como consecuencia de esta afirmación. En igual sentido responderá ante terceros. Declaran igualmente, que sus conductas se ajustan a la ley y a la ética. 
											</h3>
										</div> 
										<div class="col-md-12 wizard-identity wizard-content-form" style="padding-top:25px; text-align: right;">
										    <div class="taxable-area">
										        <div class="row">
										            <label>
										                <input type="checkbox" class="tax-check" value="incomeStatement" name="incomeStatement" id="incomeStatement" 
										                       required
										                       data-parsley-required-message="Debes marcar esta casilla para continuar">
										                <span class="checkbox-box-border"></span>
										                <span class="taxable-option">Declaro bajo juramento</span>
										            </label>
										        </div>
										    </div>
										</div>

									</div>
								</div>
								<div class="wizard-footer">
									<div class="wizard-imgbg">
										<img src="assets/img/v3.png" alt="">
									</div>
									<div class="actions">
										<ul>
											<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
											<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="multisteps-form__panel " data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>5 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar">
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-center">
									<h2>Referencias personales</h2>
									<p>Ingrese 3 referencias</p>
								</div>
								<div class="wizard-content-form" id="referenceFields">
									<div class="wizard-form-input position-relative form-group has-float-label">
											
																			
										<!-- aqui van los campos del script| -->
									</div>
								</div>
								
										<!-- <button type="button" id="addReferenceButton" style="top:"><span class="button" >Referencia <i class="fa fa-plus"></i></span></button> -->
									


								<div class="wizard-footer">
									<div class="wizard-imgbg">
										<img src="assets/img/v3.png" alt="">
									</div>
									<div class="actions">
										<ul>
											<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
											<li><span class="js-btn-next" title="Sig">Sig <i class="fa fa-arrow-right"></i></span></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="multisteps-form__panel " data-animation="slideVert">
							<div class="inner pb-100">
								<div class="wizard-topper">
									<div class="wizard-progress">
										<span>6 of 6 Completedo</span>
										<div class="progress">
											<div class="progress-bar">
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-content-item text-center">
									<h2>Declaración y comentarios</h2>
									
								</div>
								<div class="wizard-identity wizard-content-form">
									<div class="row">
										<div class="col-md-12 wizard-identity wizard-content-form">
												<h4 style="padding-bottom: 20px;">El suministro de información falsa en la presente solicitud incurre en el delito de falsedad en documento privado de acuerdo con los artículos 289 y 290 del C.P.C.</h4>
										
										</div>
									</div>
								</div>
								<div class="badge-selection">
										<label>
											<input type="radio" checked="checked" value="Acepto" id="declaration" name="declaration" required data-parsley-required 				               data-parsley-required-message="Por favor, seleccione si o no">
											<span class="checkmark">Acepto</span>
										</label>
										<!-- <label>
											<input type="radio" value="no" id="declaration" name="declaration" required data-parsley-required 											               data-parsley-required-message="Por favor, seleccione si o no">
											<span class="checkmark">NO</span>
										</label> -->
								</div>

								<div class="wizard-content-item text-center">
									<h2>Inquietudes</h2>
									
								</div>
								<div class="wizard-content-form">
									<div class="wizard-form-field">		
										<div class="wizard-form-input position-relative form-group has-float-label">
										
											<input type="text" class="form-control" name="comments" id="comments" placeholder="Escriba aqui alguna pregunta o comentario" 
									       required 
									       data-parsley-required-message="Por favor, describe tu actividad laboral"
									       data-parsley-minlength="10"
									       data-parsley-minlength-message="La descripción debe tener al menos 10 caracteres"
									       style="height: 100px;">
											<label>Escriba aqui alguna pregunta o comentario</label>
										</div>
									</div>
								</div>
								<div class="wizard-footer">
									<div class="wizard-imgbg">
										<img src="assets/img/v3.png" alt="">
									</div>
									<div class="actions">
										<ul>
											<li><span class="js-btn-prev" title="Atras"><i class="fa fa-arrow-left"></i> Atras</span></li>
											<li><button type="submit" id="submit-form" title="NEXT">Enviar <i class="fa fa-arrow-right"></i></button></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

	</div>
	<script src="assets/js/jquery-3.3.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/parsleyjs@2/dist/parsley.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/parsleyjs@2/dist/i18n/es.js"></script>
	
	<script src="assets/js/popper.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/switch.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>

	<!-- include FilePond library -->
	<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>

	<!-- include FilePond plugins -->
	<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.js"></script>

	<!-- include FilePond jQuery adapter -->
	<script src="https://unpkg.com/jquery-filepond/filepond.jquery.js"></script>

	<script>	

		$("#files").change(function() {
			filename = this.files[0].name
			console.log(filename);
		});
	</script>
	<script> addReferenceField();
		
		function addReferenceField() {
			var container = document.getElementById('referenceFields');
			var referenceHTML = `

		<div class="wizard-form-field">
			<div class="form-row">
		        <div class="wizard-form-input position-relative form-group has-float-label">
		            <input type="text" name="referenceName[]" class="form-control" placeholder="Nombre completo" required>
		            <label>Nombre completo</label>
		        </div>
		        <div class="wizard-form-input position-relative form-group has-float-label">
		            <input type="text" name="referencePhone[]" class="form-control" placeholder="Teléfono" required>
		            <label>Teléfono</label>
		        </div>
		    </div>
		  <div class="form-row">
	        <div class="wizard-form-input position-relative form-group has-float-label">
	            <input type="email" name="referenceEmail[]" class="form-control" placeholder="Correo electrónico" required>
	            <label>Correo electrónico</label>
	        </div>
	        <div class="wizard-form-input position-relative form-group has-float-label">
	            <input type="text" name="referenceAddress[]" class="form-control" placeholder="Dirección" required>
	            <label>Dirección</label>
	        </div>
	    </div>
		<div class="row">
			<div class="col-md-3">
		  			<button type="button" onclick="removeReferenceField(this)"> Eliminar <i class="fa fa-minus"></i></button>
		  	</div>
		  	<div class="col-md-3">
		  			<button type="button" id="addReferenceButton" style="top:"><span class="button" >Referencia <i class="fa fa-plus"></i></span></button>
		  	</div>
		</div>
		  
		</div>
	  `;
			container.insertAdjacentHTML('beforeend', referenceHTML);
		}

		function removeReferenceField(element) {
			element.parentNode.remove();
		}

		document.getElementById('addReferenceButton').addEventListener('click', addReferenceField);
		
	</script>
	<script>
		$(document).ready(function() {
    $('#wizard').parsley();

    // Inicializa FilePond
    const pond = FilePond.create(document.querySelector('input[type="file"]'), {
        server: {
            process: {
                url: 'https://db.buckapi.com:3131/imgApi/containers/tixsImages/upload',
                method: 'POST',
                // Puedes necesitar configurar encabezados adicionales aquí si tu API los requiere
                headers: {
                    // 'Authorization': 'Bearer YOUR_ACCESS_TOKEN' // si es necesario
                }
            }
        }
    });

    // Manejador para el evento de envío del formulario
    $('#wizard').on('submit', function(e) {
        e.preventDefault();

        // Verifica si el formulario es válido utilizando Parsley
        if ($(this).parsley().isValid()) {
            // Asegúrate de que todas las imágenes se hayan cargado antes de enviar los datos del formulario
            const imagesUploaded = pond.getFiles().filter(file => file.status === FilePond.FileStatus.PROCESSING).length === 0;

            if (imagesUploaded) {
                // Si todas las imágenes se han cargado, procede con la recopilación y envío de datos del formulario
                const formData = new FormData(this);
                const jsonObject = {};

                // Añade las URLs de las imágenes cargadas
                pond.getFiles().forEach((fileItem, index) => {
                    // Asegúrate de que 'fileItem.serverId' contenga la URL de la imagen cargada
                    jsonObject['imageURL' + index] = fileItem.serverId;
                });

                // Añade los demás datos del formulario al objeto JSON
                for (const [key, value] of formData.entries()) {
                    if (!key.startsWith("reference")) {
                        jsonObject[key] = value;
                    }
                }

                // Agrega las referencias al objeto JSON principal
                const references = [];
                const referenceNames = formData.getAll('referenceName[]');
                const referencePhones = formData.getAll('referencePhone[]');
                const referenceEmails = formData.getAll('referenceEmail[]');
                const referenceAddresses = formData.getAll('referenceAddress[]');

                for (let i = 0; i < referenceNames.length; i++) {
                    references.push({
                        name: referenceNames[i],
                        phone: referencePhones[i],
                        email: referenceEmails[i],
                        address: referenceAddresses[i]
                    });
                }

                jsonObject['references'] = references;

                // Convierte los datos del formulario en una cadena JSON
                const jsonPayload = JSON.stringify(jsonObject);

                // Realiza la solicitud POST a la API de PocketBase
                fetch('https://db.buckapi.com:8085/api/collections/requests/records', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: jsonPayload
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    window.location.href = 'pagina-de-confirmacion.html';
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
            } else {
                alert("Por favor, espera a que se carguen todas las imágenes antes de enviar el formulario.");
            }
        }
    });
});

	  </script>
	  
	<!-- <script src="https://cdn.jsdelivr.net/npm/parsleyjs@2/dist/parsley.min.js"></script> -->
<script>
$(document).ready(function() {
  // Configura Parsley para usar español
  Parsley.setLocale('es');

  // Inicializa Parsley en tu formulario
  $('#wizard').parsley();
});

</script>
<script>
    // Activar FilePond en todos los elementos con clase 'filepond'
    FilePond.parse(document.body);
	</script>
</body>

</html>